(function(e){function t(t){for(var r,a,o=t[0],s=t[1],l=t[2],u=0,f=[];u<o.length;u++)a=o[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(f.length)f.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/cryptonomicon-app/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i=(n("4de4"),n("b0c0"),{class:"container mx-auto flex flex-col items-center bg-gray-100 p-4"}),c={key:0,class:"fixed w-100 h-100 opacity-80 bg-purple-800 inset-0 z-50 flex items-center justify-center"},a=Object(r["f"])("svg",{class:"animate-spin -ml-1 mr-3 h-12 w-12 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[Object(r["f"])("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),Object(r["f"])("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),o={class:"container"},s=Object(r["f"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),l={class:""},d=Object(r["e"])("Фильтр: "),u=Object(r["f"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),f={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-3"},b={class:"px-4 py-5 sm:p-6 text-center"},h={class:"text-sm font-medium text-gray-500 truncate"},p={class:"mt-1 text-3xl font-semibold text-gray-900"},g=Object(r["f"])("div",{class:"w-full border-t border-gray-200"},null,-1),m=Object(r["f"])("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"#718096","aria-hidden":"true"},[Object(r["f"])("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),O=Object(r["e"])("Удалить "),j=Object(r["f"])("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1),y={key:1,class:"relative"},v={class:"text-lg leading-6 font-medium text-gray-900 my-8"},w={class:"flex items-end border-gray-600 border-b border-l h-64",ref:"graph"},x=Object(r["f"])("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs",version:"1.1",width:"30",height:"30",x:"0",y:"0",viewBox:"0 0 511.76 511.76",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},[Object(r["f"])("g",null,[Object(r["f"])("path",{d:"M436.896,74.869c-99.84-99.819-262.208-99.819-362.048,0c-99.797,99.819-99.797,262.229,0,362.048    c49.92,49.899,115.477,74.837,181.035,74.837s131.093-24.939,181.013-74.837C536.715,337.099,536.715,174.688,436.896,74.869z     M361.461,331.317c8.341,8.341,8.341,21.824,0,30.165c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    l-75.413-75.435l-75.392,75.413c-4.181,4.16-9.643,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    c-8.341-8.341-8.341-21.845,0-30.165l75.392-75.413l-75.413-75.413c-8.341-8.341-8.341-21.845,0-30.165    c8.32-8.341,21.824-8.341,30.165,0l75.413,75.413l75.413-75.413c8.341-8.341,21.824-8.341,30.165,0    c8.341,8.32,8.341,21.824,0,30.165l-75.413,75.413L361.461,331.317z",fill:"#718096","data-original":"#000000"})])],-1);function k(e,t,n,k,T,C){var S=Object(r["i"])("add-ticker");return Object(r["g"])(),Object(r["c"])("div",i,[T.isLoading?(Object(r["g"])(),Object(r["c"])("div",c,[a])):Object(r["d"])("",!0),Object(r["f"])("div",o,[Object(r["f"])(S,{onAddTicker:C.add,disabled:C.tooManyTickersAdded,coinList:e.coinList},null,8,["onAddTicker","disabled","coinList"]),T.tickers.length?(Object(r["g"])(),Object(r["c"])(r["a"],{key:0},[s,Object(r["f"])("div",null,[T.page>1?(Object(r["g"])(),Object(r["c"])("button",{key:0,onClick:t[1]||(t[1]=function(e){return T.page=T.page-1}),class:"my-4 mx-2 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},"Назад")):Object(r["d"])("",!0),C.hasNextPage?(Object(r["g"])(),Object(r["c"])("button",{key:1,onClick:t[2]||(t[2]=function(e){return T.page=T.page+1}),class:"my-4 mx-2 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},"Вперед")):Object(r["d"])("",!0),Object(r["f"])("div",l,[d,Object(r["l"])(Object(r["f"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return T.filter=e}),type:"text"},null,512),[[r["k"],T.filter]])])]),u,Object(r["f"])("dl",f,[(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["h"])(C.paginatedTickers,(function(e){return Object(r["g"])(),Object(r["c"])("div",{key:e.name,onClick:function(t){return C.select(e)},class:[{"border-4":T.selectedTicker==e},"bg-white overflow-hidden shadow rounded-lg border-purple-800 border-solid cursor-pointer"]},[Object(r["f"])("div",b,[Object(r["f"])("dt",h,Object(r["j"])(e.name)+" - USD ",1),Object(r["f"])("dd",p,Object(r["j"])(C.formatPrice(e.price)),1)]),g,Object(r["f"])("button",{onClick:Object(r["n"])((function(t){return C.handleDelete(e)}),["stop"]),class:"flex items-center justify-center font-medium w-full bg-gray-100 px-4 py-4 sm:px-6 text-md text-gray-500 hover:text-gray-600 hover:bg-gray-200 hover:opacity-20 transition-all focus:outline-none"},[m,O],8,["onClick"])],10,["onClick"])})),128))]),j],64)):Object(r["d"])("",!0),T.tickers.length&&T.selectedTicker?(Object(r["g"])(),Object(r["c"])("section",y,[Object(r["f"])("h3",v,Object(r["j"])(T.selectedTicker.name)+" - USD ",1),Object(r["f"])("div",w,[(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["h"])(C.normalizedGraph,(function(e,t){return Object(r["g"])(),Object(r["c"])("div",{key:t,style:{height:"".concat(e,"%")},class:"bg-purple-800 border w-10"},null,4)})),128))],512),Object(r["f"])("button",{onClick:t[4]||(t[4]=function(t){return e.cel=null}),type:"button",class:"absolute top-0 right-0"},[x])])):Object(r["d"])("",!0)])])}var T=n("2909"),C=(n("c1f9"),n("d3b7"),n("ddb0"),n("2b3d"),n("3ca3"),n("159b"),n("caad"),n("2532"),n("fb6a"),n("d81d"),n("b680"),n("7db0"),n("99af"),n("1da1")),S=(n("96cf"),n("4ec9"),"3c03a6dbebfaee780e5db05e16794655250d6e9a6278dcbaa85b97eff2c821e4"),L=new Map,M=new WebSocket("wss://streamer.cryptocompare.com/v2?api_key=".concat(S)),P="5";function E(e){var t=JSON.stringify(e);M.readyState!==WebSocket.OPEN?M.addEventListener("open",(function(){M.send(t)}),{once:!0}):M.send(t)}function A(e){E({action:"SubAdd",subs:["5~CCCAGG~".concat(e,"~USD")]})}function z(e){E({action:"SubRemove",subs:["5~CCCAGG~".concat(e,"~USD")]})}M.addEventListener("message",(function(e){var t,n=JSON.parse(e.data),r=n.TYPE,i=n.FROMSYMBOL,c=n.PRICE;if(r===P&&void 0!==c){var a=null!==(t=L.get(i))&&void 0!==t?t:[];a.forEach((function(e){return e(c)}))}}));var G=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true&api_key=".concat(S));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.Data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e,t){var n=L.get(e)||[];L.set(e,[].concat(Object(T["a"])(n),[t])),A(e)},U=function(e){L.delete(e),z(e)};window.tickers=L;var B={class:"flex"},D={class:"max-w-xs"},N=Object(r["f"])("label",{for:"wallet",class:"block text-sm font-medium text-gray-700"},"Тикер",-1),_={class:"mt-1 relative rounded-md shadow-md"},H={class:"flex bg-white shadow-md p-1 rounded-md flex-wrap"},V={key:0,class:"text-sm text-red-600"};function J(e,t,n,i,c,a){var o=Object(r["i"])("add-button");return Object(r["g"])(),Object(r["c"])("section",null,[Object(r["f"])("div",B,[Object(r["f"])("div",D,[N,Object(r["f"])("div",_,[Object(r["l"])(Object(r["f"])("input",{onInput:t[1]||(t[1]=function(){return a.addHint&&a.addHint.apply(a,arguments)}),"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.ticker=e}),onKeydown:t[3]||(t[3]=Object(r["m"])((function(e){return a.add(c.ticker)}),["enter"])),type:"text",name:"wallet",id:"wallet",class:"block w-full pr-10 border-gray-300 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm rounded-md",placeholder:"Например DOGE"},null,544),[[r["k"],c.ticker]])]),Object(r["f"])("div",H,[(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["h"])(c.hints,(function(e,t){return Object(r["g"])(),Object(r["c"])("span",{key:t,onClick:function(t){return a.add(e)},class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer"},Object(r["j"])(e),9,["onClick"])})),128))]),c.errPreviouslyAdded?(Object(r["g"])(),Object(r["c"])("div",V," Такой тикер уже добавлен ")):Object(r["d"])("",!0)])]),Object(r["f"])(o,{class:"my-4",onClick:t[4]||(t[4]=function(e){return a.add(c.ticker)}),disabled:n.disabled,type:"button"},null,8,["disabled"])])}var R=Object(r["f"])("svg",{class:"-ml-0.5 mr-2 h-6 w-6",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"#ffffff"},[Object(r["f"])("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})],-1),q=Object(r["e"])(" Добавить ");function F(e,t,n,i,c,a){return Object(r["g"])(),Object(r["c"])("button",{type:"button",disabled:n.disabled,class:["inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",{"opacity-50":n.disabled}]},[R,q],10,["disabled"])}var W={props:{disabled:{type:Boolean,required:!0,default:!1}}};W.render=F;var $=W,Y={components:{AddButton:$},props:{disabled:{type:Boolean,required:!0,default:!1},coinList:{type:Object,required:!0}},emits:{"add-ticker":function(e){return"string"===typeof e&&e.length>0}},data:function(){return{ticker:"",hints:[],errPreviouslyAdded:!1}},methods:{add:function(e){0!==this.ticker.length&&(this.$emit("add-ticker",e),this.ticker="",this.hints=[],this.errPreviouslyAdded=!1)},addHint:function(){if(this.ticker.length){this.errPreviouslyAdded=!1;var e=[];for(var t in this.coinList){if(e.length>3)return;var n=this.coinList[t].Symbol,r=this.coinList[t].FullName;n.toLowerCase()===this.ticker.toLowerCase()?e.unshift(n):r.toLowerCase().includes(this.ticker.toLowerCase())?(r=n,e.push(r)):this.hints=[],this.hints=e}}}}};Y.render=J;var K=Y,Q={name:"App",coinList:null,components:{AddTicker:K},data:function(){return{filter:"",tickers:[],selectedTicker:null,graph:[],maxGraphElements:40,isLoading:!0,page:1}},created:function(){var e=this,t=Object.fromEntries(new URL(window.location).searchParams.entries()),n=["filter","page"];n.forEach((function(n){t[n]&&(e[n]=t[n])}));var r=localStorage.getItem("cryptonomicon-list");r&&(this.tickers=JSON.parse(r),this.tickers.forEach((function(t){I(t.name,(function(n){return e.updateTicker(t.name,n)}))}))),setInterval(this.updateTickers,5e3)},mounted:function(){var e=this;G().then((function(t){e.coinList=t,e.isLoading=!1})),window.addEventListener("resize",this.calculateMaxGraphElements)},beforeUnmount:function(){window.removeEventListener("resize",this.calculateMaxGraphElements)},computed:{tooManyTickersAdded:function(){return this.tickers.length>4},filteredTickers:function(){var e=this;return this.tickers.filter((function(t){return t.name.includes(e.filter)}))},paginatedTickers:function(){return this.filteredTickers.slice(this.startIndex,this.endIndex)},startIndex:function(){return 6*(this.page-1)},endIndex:function(){return 6*this.page},hasNextPage:function(){return this.filteredTickers.length>this.endIndex},normalizedGraph:function(){var e=Math.min.apply(Math,Object(T["a"])(this.graph)),t=Math.max.apply(Math,Object(T["a"])(this.graph));return this.graph.map((function(n){return 5+95*(n-e)/(t-e)}))},pageStateOptions:function(){return{page:this.page,filter:this.filter}}},methods:{calculateMaxGraphElements:function(){this.$refs.graph&&(this.maxGraphElements=this.$refs.graph.clientWidth/38)},updateTicker:function(e,t){var n=this;this.tickers.filter((function(t){return t.name===e})).forEach((function(e){if(e===n.selectedTicker){n.graph.push(t);while(n.graph.length>n.maxGraphElements)n.graph.shift()}e.price=t}))},formatPrice:function(e){return"-"===e?e:e>1?e.toFixed(2):e.toPrecision(2)},add:function(e){var t=this,n=e.toUpperCase();if(this.tickers.find((function(e){return e.name===n})))return this.errPreviouslyAdded=!0;var r={name:n,price:"-"};this.tickers=[].concat(Object(T["a"])(this.tickers),[r]),this.filter="",I(r.name,(function(e){return t.updateTicker(r.name,e)}))},handleDelete:function(e){this.tickers=this.tickers.filter((function(t){return t!==e})),this.selectedTicker===e&&(this.selectedTicker=null),U(e.name)},select:function(e){this.selectedTicker=e}},watch:{selectedTicker:function(){this.graph=[]},tickers:function(){localStorage.setItem("cryptonomicon-list",JSON.stringify(this.tickers))},paginatedTickers:function(){0===this.paginatedTickers.length&&this.page>1&&(this.page-=1)},filter:function(){this.page=1},pageStateOptions:function(e){window.history.pushState(null,document.title,"".concat(window.location.pathname,"?filter=").concat(e.filter,"&page=").concat(e.page))}}};Q.render=k;var X=Q;n("ba8c");Object(r["b"])(X).mount("#app")},ba8c:function(e,t,n){}});
//# sourceMappingURL=app.fb19b44a.js.map